{"version":3,"file":"api-a7748431.js","sources":["../../src/js/modules/tokens.js","../../src/js/modules/api.js"],"sourcesContent":["export function saveAccessToken(token) {\n  sessionStorage.setItem('accessToken', token);\n  console.log(token);\n}\n\nexport function getAccessToken() {\n  return sessionStorage.getItem('accessToken');\n}\n\nexport function saveRefreshToken(token) {\n  localStorage.setItem('refreshToken', token);\n}\n\nexport function getRefreshToken() {\n  return localStorage.getItem('refreshToken');\n}\n\nexport function hasToken() {\n  const token = getAccessToken();\n  return Boolean(token);\n}\n\nexport function logout() {\n  sessionStorage.removeItem('accessToken');\n  localStorage.removeItem('refreshToken');\n}\n","const axios = {\n  baseURL: 'https://ch1fa83ktl.execute-api.us-east-2.amazonaws.com/dev',\n  Authorization: '',\n\n  get(endPoint) {\n    return fetch(`${this.baseURL}${endPoint}`, {\n      headers: {\n        Authorization: this.Authorization,\n      },\n    })\n      .then(res => res.json())\n      .then(data => {\n        return { data };\n      });\n  },\n  post(endPoint, data) {\n    return fetch(`${this.baseURL}${endPoint}`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.Authorization,\n      },\n    })\n      .then(res => res.json())\n      .then(data => {\n        return { data };\n      });\n  },\n  put(endPoint, data) {\n    return fetch(`${this.baseURL}${endPoint}`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.Authorization,\n      },\n    })\n      .then(res => res.json())\n      .then(data => {\n        return { data };\n      });\n  },\n};\n\nimport { getAccessToken, logout, saveAccessToken } from './tokens';\n\nconst setAuthHeader = token => {\n  axios.Authorization = `Bearer ${token}`;\n};\n\nconst clearAuthHeader = () => {\n  axios.Authorization = '';\n};\n\nexport async function getMolecules() {\n  const endPoint = '/molecules';\n  const res = await axios.get(endPoint);\n  return res.data;\n}\nexport async function getMoleculesByName(name) {\n  const endPoint = `/molecules/${name}`;\n  const res = await axios.get(endPoint);\n  return res.data;\n}\n\nexport async function updateMolecule({ name, ...data }) {\n  const token = getAccessToken();\n  setAuthHeader(token);\n  const endPoint = `/molecules/${name}`;\n  try {\n    const res = await axios.put(endPoint, data);\n    return res.data;\n  } catch {\n    console.log('ERROR');\n    return {};\n  }\n}\n\nexport async function logIn(credentials) {\n  try {\n    const endPoint = '/auth/login';\n    const res = await axios.post(endPoint, credentials);\n    setAuthHeader(res.data.data.accessToken);\n    saveAccessToken(res.data.data.accessToken);\n    return res.data;\n  } catch (err) {\n    console.log(err);\n    throw new Error('Error Auth!');\n  }\n}\n\nexport async function userLogOut() {\n  setAuthHeader('');\n  clearAuthHeader();\n  logout();\n  document.body.querySelector('.js-logout').remove();\n}\n"],"names":["saveAccessToken","token","getAccessToken","hasToken","logout","axios","endPoint","res","data","setAuthHeader","clearAuthHeader","getMolecules","getMoleculesByName","name","updateMolecule","logIn","credentials","err","userLogOut"],"mappings":"ssBAAO,SAASA,EAAgBC,EAAO,CACrC,eAAe,QAAQ,cAAeA,CAAK,EAC3C,QAAQ,IAAIA,CAAK,CACnB,CAEO,SAASC,GAAiB,CAC/B,OAAO,eAAe,QAAQ,aAAa,CAC7C,CAUO,SAASC,GAAW,CAEzB,MAAO,EADOD,GAEhB,CAEO,SAASE,GAAS,CACvB,eAAe,WAAW,aAAa,EACvC,aAAa,WAAW,cAAc,CACxC,CCzBA,MAAMC,EAAQ,CACZ,QAAS,6DACT,cAAe,GAEf,IAAIC,EAAU,CACZ,OAAO,MAAM,GAAG,KAAK,OAAO,GAAGA,CAAQ,GAAI,CACzC,QAAS,CACP,cAAe,KAAK,aACrB,CACP,CAAK,EACE,KAAKC,GAAOA,EAAI,MAAM,EACtB,KAAKC,IACG,CAAE,KAAAA,CAAI,EACd,CACJ,EACD,KAAKF,EAAUE,EAAM,CACnB,OAAO,MAAM,GAAG,KAAK,OAAO,GAAGF,CAAQ,GAAI,CACzC,OAAQ,OACR,KAAM,KAAK,UAAUE,CAAI,EACzB,QAAS,CACP,eAAgB,mBAChB,cAAe,KAAK,aACrB,CACP,CAAK,EACE,KAAKD,GAAOA,EAAI,MAAM,EACtB,KAAKC,IACG,CAAE,KAAAA,CAAI,EACd,CACJ,EACD,IAAIF,EAAUE,EAAM,CAClB,OAAO,MAAM,GAAG,KAAK,OAAO,GAAGF,CAAQ,GAAI,CACzC,OAAQ,OACR,KAAM,KAAK,UAAUE,CAAI,EACzB,QAAS,CACP,eAAgB,mBAChB,cAAe,KAAK,aACrB,CACP,CAAK,EACE,KAAKD,GAAOA,EAAI,MAAM,EACtB,KAAKC,IACG,CAAE,KAAAA,CAAI,EACd,CACJ,CACH,EAIMC,EAAgBR,GAAS,CAC7BI,EAAM,cAAgB,UAAUJ,CAAK,EACvC,EAEMS,EAAkB,IAAM,CAC5BL,EAAM,cAAgB,EACxB,EAEO,eAAeM,GAAe,CACnC,MAAML,EAAW,aAEjB,OADY,MAAMD,EAAM,IAAIC,CAAQ,GACzB,IACb,CACO,eAAeM,EAAmBC,EAAM,CAC7C,MAAMP,EAAW,cAAcO,CAAI,GAEnC,OADY,MAAMR,EAAM,IAAIC,CAAQ,GACzB,IACb,CAEO,eAAeQ,EAAe,CAAE,KAAAD,EAAM,GAAGL,GAAQ,CACtD,MAAMP,EAAQC,IACdO,EAAcR,CAAK,EACnB,MAAMK,EAAW,cAAcO,CAAI,GACnC,GAAI,CAEF,OADY,MAAMR,EAAM,IAAIC,EAAUE,CAAI,GAC/B,IACf,MAAU,CACN,eAAQ,IAAI,OAAO,EACZ,EACR,CACH,CAEO,eAAeO,EAAMC,EAAa,CACvC,GAAI,CACF,MAAMV,EAAW,cACXC,EAAM,MAAMF,EAAM,KAAKC,EAAUU,CAAW,EAClD,OAAAP,EAAcF,EAAI,KAAK,KAAK,WAAW,EACvCP,EAAgBO,EAAI,KAAK,KAAK,WAAW,EAClCA,EAAI,IACZ,OAAQU,EAAK,CACZ,cAAQ,IAAIA,CAAG,EACT,IAAI,MAAM,aAAa,CAC9B,CACH,CAEO,eAAeC,GAAa,CACjCT,EAAc,EAAE,EAChBC,IACAN,IACA,SAAS,KAAK,cAAc,YAAY,EAAE,OAAM,CAClD"}